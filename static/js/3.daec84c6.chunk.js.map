{"version":3,"sources":["hoc/withAuthRedirect.tsx","components/Description/Description.module.css","components/Description/Posts/Posts.module.css","components/Description/Posts/Post/Post.module.css","components/Description/ProfileInfo/ProfileStatusWithHooks.tsx","components/Description/ProfileInfo/ProfileInfo.tsx","components/Description/Posts/Post/Post.tsx","components/Description/Posts/Posts.tsx","components/Description/Posts/PostsContainer.tsx","components/Description/Description.tsx","components/Description/ProfileContainer.tsx"],"names":["mapStateToProps","state","isAuth","auth","withAuthRedirect","Component","connect","props","restProps","to","module","exports","ProfileStatusWithHooks","useState","editMode","setEdtMode","status","setStatus","useEffect","onDoubleClick","type","onChange","event","currentTarget","value","autoFocus","onBlur","updateStatus","ProfileInfo","profileUser","Preloader","className","styles","description","descriptionText","fullName","src","photos","large","userImg","alt","isOwner","e","target","files","length","savePhoto","setEditMode","ContactInfo","contact","contactKey","contactInfo","ProfileBlock","onClick","aboutMe","contacts","Object","keys","map","key","checked","lookingForAJob","disabled","lookingForAJobDescription","Post","post","title","likesCount","Posts","React","memo","postsElements","posts","AddPostReduxForm","onSubmit","values","addPost","newPostText","Textarea","Element","maxLength20","maxLengthCreator","reduxForm","form","handleSubmit","Field","component","name","validate","required","placeholder","PostsContainer","profilePage","dispatch","Description","setProfilePhoto","ProfileContainer","userId","this","match","params","authorizedUserId","toString","history","push","getProfileUser","getUserStatus","refreshProfile","prevProps","prevState","snapshot","updateUserStatus","ProfileUserContainer","compose","data","id","withRouter"],"mappings":"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","file":"static/js/3.daec84c6.chunk.js","sourcesContent":["import React, {ComponentType} from \"react\";\r\nimport {Redirect} from \"react-router-dom\";\r\nimport {connect} from \"react-redux\";\r\nimport {AppStateType} from \"../redux/redux-store\";\r\n\r\ntype MapStatePropsType = {\r\n    isAuth: boolean\r\n}\r\n\r\nconst mapStateToProps = (state: AppStateType): MapStatePropsType => ({\r\n    isAuth: state.auth.isAuth\r\n})\r\n\r\nexport function withAuthRedirect<T>(Component: ComponentType<T>) {\r\n    const RedirectComponent = (props: MapStatePropsType) => {\r\n        let {isAuth, ...restProps} = props\r\n        if (!isAuth) {\r\n            return <Redirect to={\"/login\"}/>\r\n        }\r\n        return <Component {...restProps as T} />;\r\n    }\r\n\r\n    const ConnectedAuthRedirectComponent = connect(mapStateToProps)(RedirectComponent)\r\n\r\n    return ConnectedAuthRedirectComponent\r\n}","// extracted by mini-css-extract-plugin\nmodule.exports = {\"description\":\"Description_description__2EoJ-\",\"descriptionText\":\"Description_descriptionText__3V31Z\",\"contact\":\"Description_contact__-Hddk\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"posts\":\"Posts_posts__167O5\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"post\":\"Post_post__1Akat\"};","import React, {ChangeEvent, ChangeEventHandler, useEffect, useState} from \"react\";\r\n\r\ntype ProfileStatusPropsType = {\r\n    status: string\r\n    updateStatus: (status: string) => void\r\n}\r\n\r\nexport const ProfileStatusWithHooks: React.FC<ProfileStatusPropsType> = (props) => {\r\n    const [editMode, setEdtMode] = useState(false)\r\n    const [status, setStatus] = useState(props.status)\r\n\r\n    useEffect(() => {\r\n        setStatus(props.status)\r\n    }, [props.status])\r\n\r\n    const activateEdiMode = () => {\r\n        setEdtMode(true)\r\n    }\r\n\r\n    const deactivateEdiMode = () => {\r\n        setEdtMode(false)\r\n        props.updateStatus(status)\r\n    }\r\n\r\n    const onStatusChange = (event: ChangeEvent<HTMLInputElement>) => {\r\n        setStatus(event.currentTarget.value)\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <div>\r\n                {!editMode &&\r\n                <div>\r\n                    <span onDoubleClick={activateEdiMode}>{status ? status : '----'}</span>\r\n                </div>\r\n                }\r\n                {editMode &&\r\n                <div>\r\n                    <input type=\"text\" onChange={onStatusChange} autoFocus={true} value={status}\r\n                           onBlur={deactivateEdiMode}/>\r\n                </div>\r\n                }\r\n            </div>\r\n        </>\r\n    )\r\n}","import React, {ChangeEvent, useState} from \"react\";\r\nimport styles from \"../Description.module.css\";\r\nimport {ContactsUserType, ProfileUserType} from \"../../../redux/profile-reducer\";\r\nimport {Preloader} from \"../../common/Preloader/Preloader\";\r\nimport userImg from \"../../../img/user.jpg\";\r\nimport {ProfileStatus} from \"./ProfileStatus\";\r\nimport {ProfileStatusWithHooks} from \"./ProfileStatusWithHooks\";\r\n\r\ntype dataPropsType = {\r\n    profileUser: ProfileUserType | null\r\n    status: string\r\n    updateStatus: (status: string) => void\r\n    isOwner: boolean\r\n    savePhoto: (photo: any) => void\r\n}\r\n\r\nexport function ProfileInfo(props: dataPropsType) {\r\n    const [editMode, setEdtMode] = useState(false)\r\n\r\n    if (!props.profileUser) {\r\n        return <Preloader />\r\n    }\r\n\r\n    const onProfilePhotoSelected = (e: ChangeEvent<HTMLInputElement>) => {\r\n        if(e.target.files?.length) {\r\n            props.savePhoto(e.target.files[0])\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <div className={styles.description}>\r\n                {/*<img className={styles.profilePhoto}*/}\r\n                {/*     src=\"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQ97gU24eaD3S2Fer99w9GKOy9OOhTd5fCWZA&usqp=CAU\"*/}\r\n                {/*     alt=\"ava\"/>*/}\r\n            </div>\r\n            <div className={styles.descriptionText}>\r\n                <h2>{props.profileUser.fullName}</h2>\r\n                <img src={props.profileUser.photos?.large || userImg} alt={\"ava\"}/>\r\n                {props.isOwner && <input type={'file'} onChange={onProfilePhotoSelected} />}\r\n                <ProfileStatusWithHooks status={props.status} updateStatus={props.updateStatus}/>\r\n                {!editMode && <ProfileBlock profileUser={props.profileUser} isOwner={props.isOwner} setEditMode={setEdtMode} />}\r\n                {/*{editMode && <ProfileDataForm />}*/}\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\ntype ContactInfoTypeProps = {\r\n    contactKey: string\r\n    contactInfo: string | null\r\n}\r\n\r\nconst ContactInfo: React.FC<ContactInfoTypeProps> = (props) => {\r\n    return <div className={styles.contact}><b>{props.contactKey}: </b>{props.contactInfo}</div>\r\n}\r\n\r\nconst ProfileBlock = (props: {profileUser: ProfileUserType, isOwner: boolean, setEditMode: (editMode: boolean) => void}) => {\r\n    return(\r\n        <>\r\n            {props.isOwner && <button onClick={() => props.setEditMode(true)}>Edit</button>}\r\n            <div>\r\n                {props.profileUser.aboutMe}\r\n            </div>\r\n            {props.profileUser.contacts && <div>{Object.keys(props.profileUser.contacts).map(key => {\r\n                return <ContactInfo key={key} contactKey={key} contactInfo={props.profileUser.contacts[key as keyof ContactsUserType]}/>\r\n            })}</div>}\r\n            <div>\r\n                <span>{\"Looking for a job: \"}</span>\r\n                <input type={\"checkbox\"} checked={props.profileUser.lookingForAJob} disabled={true}/>\r\n                <span>{props.profileUser.lookingForAJobDescription}</span>\r\n            </div>\r\n        </>\r\n    )\r\n}","import React from \"react\";\r\nimport styles from \"./Post.module.css\";\r\nimport {PostType} from \"../../../../redux/profile-reducer\";\r\n\r\nexport const Post: React.FC<PostType> = (props) => {\r\n    return (\r\n        <div className={styles.post}>\r\n            <div>\r\n                <img src=\"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRPSP8oOxLZy-bSFwd2sDoNmAEB4MNILAKPHA&usqp=CAU\" alt=\"ava\" />\r\n                {props.title}\r\n            </div>\r\n            <span>\r\n                {props.likesCount} likes\r\n            </span>\r\n        </div>\r\n    )\r\n}","import React, {ChangeEvent} from \"react\";\r\nimport styles from \"./Posts.module.css\";\r\nimport {Post} from \"./Post/Post\";\r\nimport {PostType} from \"../../../redux/profile-reducer\";\r\nimport {Field, InjectedFormProps, reduxForm} from \"redux-form\";\r\nimport {maxLengthCreator, required} from \"../../../utils/validators/validators\";\r\nimport {Element} from \"../../common/FormControls/FormControls\";\r\n\r\ntype postsPropsType = {\r\n    posts: Array<PostType>\r\n    addPost: (newPostText: string) => void\r\n}\r\n\r\ntype dataAddPostPropsType = {\r\n    newPostText: string\r\n}\r\n\r\nexport const Posts: React.FC<postsPropsType> = React.memo((props) => {\r\n    let postsElements = props.posts.map(post => <Post title={post.title}\r\n                                                      likesCount={post.likesCount}/>)\r\n\r\n    let addNewPost = (values: dataAddPostPropsType) => {\r\n        props.addPost(values.newPostText)\r\n    }\r\n\r\n    return (\r\n        <div className={styles.posts}>\r\n            <AddPostReduxForm onSubmit={addNewPost} />\r\n            <div>\r\n                {postsElements}\r\n            </div>\r\n        </div>\r\n    )\r\n})\r\n\r\nconst Textarea = Element(\"textarea\")\r\n\r\nconst maxLength20 = maxLengthCreator(20)\r\n\r\nconst AddPostForm: React.FC<InjectedFormProps<dataAddPostPropsType>> = (props) => {\r\n    return (\r\n        <form onSubmit={props.handleSubmit}>\r\n            <div>\r\n                <div>\r\n                    <Field component={Textarea}\r\n                       name={\"newPostText\"}\r\n                       validate={[required, maxLength20]}\r\n                       placeholder={\"Enter post\"}/>\r\n                </div>\r\n                <div>\r\n                    <button>Add</button>\r\n                </div>\r\n            </div>\r\n        </form>\r\n    )\r\n}\r\n\r\nconst AddPostReduxForm = reduxForm<dataAddPostPropsType>({form: 'addPostForm'})(AddPostForm)\r\n","import React from \"react\";\r\nimport {addPost} from \"../../../redux/profile-reducer\";\r\nimport {Posts} from \"./Posts\";\r\nimport {connect} from \"react-redux\";\r\nimport {AppStateType} from \"../../../redux/redux-store\";\r\nimport {Dispatch} from \"redux\";\r\n\r\n\r\nlet mapStateToProps = (state: AppStateType) => {\r\n    return {\r\n        posts: state.profilePage.posts,\r\n    }\r\n}\r\n\r\nlet mapDispatchToProps = (dispatch: Dispatch) => {\r\n    return {\r\n        addPost: (newPostText: string) => {\r\n            dispatch(addPost(newPostText))\r\n        },\r\n    }\r\n}\r\n\r\nexport const PostsContainer = connect(mapStateToProps, mapDispatchToProps)(Posts)","import React from \"react\";\r\nimport { ProfileInfo } from \"./ProfileInfo/ProfileInfo\";\r\nimport {PostsContainer} from \"./Posts/PostsContainer\";\r\nimport {ProfileUserType} from \"../../redux/profile-reducer\";\r\n\r\ntype dataPropsType = {\r\n    profileUser: ProfileUserType | null\r\n    status: string\r\n    updateStatus: (status: string) => void\r\n    setProfilePhoto: (photo: any) => void\r\n    isOwner: boolean\r\n}\r\n\r\nexport const Description: React.FC<dataPropsType> = (props) => {\r\n    return (\r\n        <div>\r\n            <ProfileInfo profileUser={props.profileUser} status={props.status} updateStatus={props.updateStatus} savePhoto={props.setProfilePhoto} isOwner={props.isOwner} />\r\n            <PostsContainer />\r\n        </div>\r\n    )\r\n}\r\n","import React from \"react\";\r\nimport {AppStateType} from \"../../redux/redux-store\";\r\nimport {\r\n    getProfileUser,\r\n    getUserStatus,\r\n    ProfileUserType,\r\n    setProfilePhoto,\r\n    updateUserStatus\r\n} from \"../../redux/profile-reducer\";\r\nimport {Description} from \"./Description\";\r\nimport {connect} from \"react-redux\";\r\nimport {RouteComponentProps, withRouter} from \"react-router-dom\";\r\nimport {withAuthRedirect} from \"../../hoc/withAuthRedirect\";\r\nimport {compose} from \"redux\";\r\n\r\ntype mapStatePropsType = {\r\n    profileUser: ProfileUserType | null\r\n    status: string\r\n    authorizedUserId: number\r\n    isAuth: boolean\r\n}\r\ntype mapDispatchPropsType = {\r\n    getProfileUser: (userId: string) => void\r\n    getUserStatus: (userId: string) => void\r\n    updateUserStatus: (status: string) => void\r\n    setProfilePhoto: (photo: any) => void\r\n}\r\n\r\ntype ownPropsType = mapStatePropsType & mapDispatchPropsType\r\n\r\ntype PathParamsType = {\r\n    userId: string\r\n}\r\nexport type dataPropsType = RouteComponentProps<PathParamsType> & ownPropsType\r\n\r\nclass ProfileContainer extends React.Component<dataPropsType, AppStateType> {\r\n    refreshProfile() {\r\n        let userId = this.props.match.params.userId\r\n        if (!userId) {\r\n            userId = this.props.authorizedUserId.toString()\r\n            if (!userId) {\r\n                this.props.history.push(\"/login\")\r\n            }\r\n        }\r\n        this.props.getProfileUser(userId)\r\n        this.props.getUserStatus(userId)\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.refreshProfile()\r\n    }\r\n\r\n    componentDidUpdate(prevProps: Readonly<dataPropsType>, prevState: Readonly<AppStateType>, snapshot?: any) {\r\n        if(this.props.match.params.userId !== prevProps.match.params.userId) {\r\n            this.refreshProfile()\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <Description profileUser={this.props.profileUser}\r\n                         status={this.props.status}\r\n                         updateStatus={this.props.updateUserStatus}\r\n                         setProfilePhoto={this.props.setProfilePhoto}\r\n                         isOwner={!this.props.match.params.userId} />\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state: AppStateType): mapStatePropsType => {\r\n    return {\r\n        profileUser: state.profilePage.profileUser,\r\n        status: state.profilePage.status,\r\n        authorizedUserId: state.auth.data.id,\r\n        isAuth: state.auth.isAuth\r\n    }\r\n}\r\n\r\nexport const ProfileUserContainer = compose<React.ComponentType>(\r\n    connect(mapStateToProps, {getProfileUser, getUserStatus, updateUserStatus, setProfilePhoto}),\r\n    withRouter,\r\n    withAuthRedirect\r\n)(ProfileContainer)\r\n\r\n"],"sourceRoot":""}